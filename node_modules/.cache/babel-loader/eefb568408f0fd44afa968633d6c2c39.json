{"ast":null,"code":"import * as React from 'react';\nimport { usePrevious, useResizeListener, useEventListener, useMountEffect, useUpdateEffect } from 'primereact/hooks';\nimport { DomHandler, ObjectUtils, classNames } from 'primereact/utils';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (null != _i) {\n    var _s,\n        _e,\n        _x,\n        _r,\n        _arr = [],\n        _n = !0,\n        _d = !1;\n\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0) {\n        ;\n      }\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar VirtualScroller = /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var vertical = props.orientation === 'vertical';\n  var horizontal = props.orientation === 'horizontal';\n  var both = props.orientation === 'both';\n\n  var _React$useState = React.useState(both ? {\n    rows: 0,\n    cols: 0\n  } : 0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      firstState = _React$useState2[0],\n      setFirstState = _React$useState2[1];\n\n  var _React$useState3 = React.useState(both ? {\n    rows: 0,\n    cols: 0\n  } : 0),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      lastState = _React$useState4[0],\n      setLastState = _React$useState4[1];\n\n  var _React$useState5 = React.useState(both ? {\n    rows: 0,\n    cols: 0\n  } : 0),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      numItemsInViewportState = _React$useState6[0],\n      setNumItemsInViewportState = _React$useState6[1];\n\n  var _React$useState7 = React.useState(props.numToleratedItems),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      numToleratedItemsState = _React$useState8[0],\n      setNumToleratedItemsState = _React$useState8[1];\n\n  var _React$useState9 = React.useState(props.loading || false),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      loadingState = _React$useState10[0],\n      setLoadingState = _React$useState10[1];\n\n  var _React$useState11 = React.useState([]),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      loaderArrState = _React$useState12[0],\n      setLoaderArrState = _React$useState12[1];\n\n  var elementRef = React.useRef(null);\n\n  var _contentRef = React.useRef(null);\n\n  var _spacerRef = React.useRef(null);\n\n  var _stickyRef = React.useRef(null);\n\n  var lastScrollPos = React.useRef(both ? {\n    top: 0,\n    left: 0\n  } : 0);\n  var scrollTimeout = React.useRef(null);\n  var resizeTimeout = React.useRef(null);\n  var defaultWidth = React.useRef(null);\n  var defaultHeight = React.useRef(null);\n  var prevItems = usePrevious(props.items);\n  var prevLoading = usePrevious(props.loading);\n\n  var _useResizeListener = useResizeListener({\n    listener: function listener(event) {\n      return onResize();\n    }\n  }),\n      _useResizeListener2 = _slicedToArray(_useResizeListener, 1),\n      bindWindowResizeListener = _useResizeListener2[0];\n\n  var _useEventListener = useEventListener({\n    target: 'window',\n    type: 'orientationchange',\n    listener: function listener(event) {\n      return onResize();\n    }\n  }),\n      _useEventListener2 = _slicedToArray(_useEventListener, 1),\n      bindOrientationChangeListener = _useEventListener2[0];\n\n  var getElementRef = function getElementRef() {\n    return elementRef;\n  };\n\n  var scrollTo = function scrollTo(options) {\n    lastScrollPos.current = both ? {\n      top: 0,\n      left: 0\n    } : 0;\n    elementRef.current && elementRef.current.scrollTo(options);\n  };\n\n  var scrollToIndex = function scrollToIndex(index) {\n    var behavior = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'auto';\n\n    var _calculateNumItems = calculateNumItems(),\n        numToleratedItems = _calculateNumItems.numToleratedItems;\n\n    var calculateFirst = function calculateFirst() {\n      var _index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      var _numT = arguments.length > 1 ? arguments[1] : undefined;\n\n      return _index <= _numT ? 0 : _index;\n    };\n\n    var calculateCoord = function calculateCoord(_first, _size) {\n      return _first * _size;\n    };\n\n    var scrollToItem = function scrollToItem() {\n      var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var top = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      return scrollTo({\n        left: left,\n        top: top,\n        behavior: behavior\n      });\n    };\n\n    if (both) {\n      var newFirst = {\n        rows: calculateFirst(index[0], numToleratedItems[0]),\n        cols: calculateFirst(index[1], numToleratedItems[1])\n      };\n\n      if (newFirst.rows !== firstState.rows || newFirst.cols !== firstState.cols) {\n        scrollToItem(calculateCoord(newFirst.cols, props.itemSize[1]), calculateCoord(newFirst.rows, props.itemSize[0]));\n      }\n    } else {\n      var _newFirst = calculateFirst(index, numToleratedItems);\n\n      if (_newFirst !== firstState) {\n        horizontal ? scrollToItem(calculateCoord(_newFirst, props.itemSize), 0) : scrollToItem(0, calculateCoord(_newFirst, props.itemSize));\n      }\n    }\n  };\n\n  var scrollInView = function scrollInView(index, to) {\n    var behavior = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'auto';\n\n    if (to) {\n      var _getRenderedRange = getRenderedRange(),\n          first = _getRenderedRange.first,\n          viewport = _getRenderedRange.viewport;\n\n      var scrollToItem = function scrollToItem() {\n        var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var top = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        return scrollTo({\n          left: left,\n          top: top,\n          behavior: behavior\n        });\n      };\n\n      var isToStart = to === 'to-start';\n      var isToEnd = to === 'to-end';\n\n      if (isToStart) {\n        if (both) {\n          if (viewport.first.rows - first.rows > index[0]) {\n            scrollToItem(viewport.first.cols * props.itemSize[1], (viewport.first.rows - 1) * props.itemSize[0]);\n          } else if (viewport.first.cols - first.cols > index[1]) {\n            scrollToItem((viewport.first.cols - 1) * props.itemSize[1], viewport.first.rows * props.itemSize[0]);\n          }\n        } else {\n          if (viewport.first - first > index) {\n            var pos = (viewport.first - 1) * props.itemSize;\n            horizontal ? scrollToItem(pos, 0) : scrollToItem(0, pos);\n          }\n        }\n      } else if (isToEnd) {\n        if (both) {\n          if (viewport.last.rows - first.rows <= index[0] + 1) {\n            scrollToItem(viewport.first.cols * props.itemSize[1], (viewport.first.rows + 1) * props.itemSize[0]);\n          } else if (viewport.last.cols - first.cols <= index[1] + 1) {\n            scrollToItem((viewport.first.cols + 1) * props.itemSize[1], viewport.first.rows * props.itemSize[0]);\n          }\n        } else {\n          if (viewport.last - first <= index + 1) {\n            var _pos2 = (viewport.first + 1) * props.itemSize;\n\n            horizontal ? scrollToItem(_pos2, 0) : scrollToItem(0, _pos2);\n          }\n        }\n      }\n    } else {\n      scrollToIndex(index, behavior);\n    }\n  };\n\n  var getRows = function getRows() {\n    return loadingState ? props.loaderDisabled ? loaderArrState : [] : loadedItems();\n  };\n\n  var getColumns = function getColumns() {\n    if (props.columns && both || horizontal) {\n      return loadingState && props.loaderDisabled ? both ? loaderArrState[0] : loaderArrState : props.columns.slice(both ? firstState.cols : firstState, both ? lastState.cols : lastState);\n    }\n\n    return props.columns;\n  };\n\n  var getRenderedRange = function getRenderedRange() {\n    var calculateFirstInViewport = function calculateFirstInViewport(_pos, _size) {\n      return Math.floor(_pos / (_size || _pos));\n    };\n\n    var firstInViewport = firstState;\n    var lastInViewport = 0;\n\n    if (elementRef.current) {\n      var _elementRef$current = elementRef.current,\n          scrollTop = _elementRef$current.scrollTop,\n          scrollLeft = _elementRef$current.scrollLeft;\n\n      if (both) {\n        firstInViewport = {\n          rows: calculateFirstInViewport(scrollTop, props.itemSize[0]),\n          cols: calculateFirstInViewport(scrollLeft, props.itemSize[1])\n        };\n        lastInViewport = {\n          rows: firstInViewport.rows + numItemsInViewportState.rows,\n          cols: firstInViewport.cols + numItemsInViewportState.cols\n        };\n      } else {\n        var scrollPos = horizontal ? scrollLeft : scrollTop;\n        firstInViewport = calculateFirstInViewport(scrollPos, props.itemSize);\n        lastInViewport = firstInViewport + numItemsInViewportState;\n      }\n    }\n\n    return {\n      first: firstState,\n      last: lastState,\n      viewport: {\n        first: firstInViewport,\n        last: lastInViewport\n      }\n    };\n  };\n\n  var calculateNumItems = function calculateNumItems() {\n    var contentPos = getContentPosition();\n    var contentWidth = elementRef.current ? elementRef.current.offsetWidth - contentPos.left : 0;\n    var contentHeight = elementRef.current ? elementRef.current.offsetHeight - contentPos.top : 0;\n\n    var calculateNumItemsInViewport = function calculateNumItemsInViewport(_contentSize, _itemSize) {\n      return Math.ceil(_contentSize / (_itemSize || _contentSize));\n    };\n\n    var calculateNumToleratedItems = function calculateNumToleratedItems(_numItems) {\n      return Math.ceil(_numItems / 2);\n    };\n\n    var numItemsInViewport = both ? {\n      rows: calculateNumItemsInViewport(contentHeight, props.itemSize[0]),\n      cols: calculateNumItemsInViewport(contentWidth, props.itemSize[1])\n    } : calculateNumItemsInViewport(horizontal ? contentWidth : contentHeight, props.itemSize);\n    var numToleratedItems = numToleratedItemsState || (both ? [calculateNumToleratedItems(numItemsInViewport.rows), calculateNumToleratedItems(numItemsInViewport.cols)] : calculateNumToleratedItems(numItemsInViewport));\n    return {\n      numItemsInViewport: numItemsInViewport,\n      numToleratedItems: numToleratedItems\n    };\n  };\n\n  var calculateOptions = function calculateOptions() {\n    var _calculateNumItems2 = calculateNumItems(),\n        numItemsInViewport = _calculateNumItems2.numItemsInViewport,\n        numToleratedItems = _calculateNumItems2.numToleratedItems;\n\n    var calculateLast = function calculateLast(_first, _num, _numT, _isCols) {\n      return getLast(_first + _num + (_first < _numT ? 2 : 3) * _numT, _isCols);\n    };\n\n    var last = both ? {\n      rows: calculateLast(firstState.rows, numItemsInViewport.rows, numToleratedItems[0]),\n      cols: calculateLast(firstState.cols, numItemsInViewport.cols, numToleratedItems[1], true)\n    } : calculateLast(firstState, numItemsInViewport, numToleratedItems);\n    setNumItemsInViewportState(numItemsInViewport);\n    setNumToleratedItemsState(numToleratedItems);\n    setLastState(last);\n\n    if (props.showLoader) {\n      setLoaderArrState(both ? Array.from({\n        length: numItemsInViewport.rows\n      }).map(function () {\n        return Array.from({\n          length: numItemsInViewport.cols\n        });\n      }) : Array.from({\n        length: numItemsInViewport\n      }));\n    }\n\n    if (props.lazy) {\n      props.onLazyLoad && props.onLazyLoad({\n        first: firstState,\n        last: last\n      });\n    }\n  };\n\n  var calculateAutoSize = function calculateAutoSize(loading) {\n    if (props.autoSize && !loading) {\n      Promise.resolve().then(function () {\n        if (_contentRef.current) {\n          _contentRef.current.style.minHeight = _contentRef.current.style.minWidth = 'auto';\n          var _contentRef$current = _contentRef.current,\n              offsetWidth = _contentRef$current.offsetWidth,\n              offsetHeight = _contentRef$current.offsetHeight;\n          (both || horizontal) && (elementRef.current.style.width = (offsetWidth < defaultWidth.current ? offsetWidth : defaultWidth.current) + 'px');\n          (both || vertical) && (elementRef.current.style.height = (offsetHeight < defaultHeight.current ? offsetHeight : defaultHeight.current) + 'px');\n          _contentRef.current.style.minHeight = _contentRef.current.style.minWidth = '';\n        }\n      });\n    }\n  };\n\n  var getLast = function getLast() {\n    var last = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var isCols = arguments.length > 1 ? arguments[1] : undefined;\n    return props.items ? Math.min(isCols ? (props.columns || props.items[0]).length : props.items.length, last) : 0;\n  };\n\n  var getContentPosition = function getContentPosition() {\n    if (_contentRef.current) {\n      var style = getComputedStyle(_contentRef.current);\n      var left = parseInt(style.paddingLeft, 10) + Math.max(parseInt(style.left, 10), 0);\n      var right = parseInt(style.paddingRight, 10) + Math.max(parseInt(style.right, 10), 0);\n      var top = parseInt(style.paddingTop, 10) + Math.max(parseInt(style.top, 10), 0);\n      var bottom = parseInt(style.paddingBottom, 10) + Math.max(parseInt(style.bottom, 10), 0);\n      return {\n        left: left,\n        right: right,\n        top: top,\n        bottom: bottom,\n        x: left + right,\n        y: top + bottom\n      };\n    }\n\n    return {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      x: 0,\n      y: 0\n    };\n  };\n\n  var setSize = function setSize() {\n    if (elementRef.current) {\n      var parentElement = elementRef.current.parentElement;\n      var width = props.scrollWidth || \"\".concat(elementRef.current.offsetWidth || parentElement.offsetWidth, \"px\");\n      var height = props.scrollHeight || \"\".concat(elementRef.current.offsetHeight || parentElement.offsetHeight, \"px\");\n\n      var setProp = function setProp(_name, _value) {\n        return elementRef.current.style[_name] = _value;\n      };\n\n      if (both || horizontal) {\n        setProp('height', height);\n        setProp('width', width);\n      } else {\n        setProp('height', height);\n      }\n    }\n  };\n\n  var setSpacerSize = function setSpacerSize() {\n    var items = props.items;\n\n    if (_spacerRef.current && items) {\n      var contentPos = getContentPosition();\n\n      var setProp = function setProp(_name, _value, _size) {\n        var _cpos = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n        return _spacerRef.current.style[_name] = (_value || []).length * _size + _cpos + 'px';\n      };\n\n      if (both) {\n        setProp('height', items, props.itemSize[0], contentPos.y);\n        setProp('width', props.columns || items[1], props.itemSize[1], contentPos.x);\n      } else {\n        horizontal ? setProp('width', props.columns || items, props.itemSize, contentPos.x) : setProp('height', items, props.itemSize, contentPos.y);\n      }\n    }\n  };\n\n  var setContentPosition = function setContentPosition(pos) {\n    if (_contentRef.current) {\n      var first = pos ? pos.first : firstState;\n\n      var calculateTranslateVal = function calculateTranslateVal(_first, _size) {\n        return _first * _size;\n      };\n\n      var setTransform = function setTransform() {\n        var _x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n        var _y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n        _stickyRef.current && (_stickyRef.current.style.top = \"-\".concat(_y, \"px\"));\n        _contentRef.current.style.transform = \"translate3d(\".concat(_x, \"px, \").concat(_y, \"px, 0)\");\n      };\n\n      if (both) {\n        setTransform(calculateTranslateVal(first.cols, props.itemSize[1]), calculateTranslateVal(first.rows, props.itemSize[0]));\n      } else {\n        var translateVal = calculateTranslateVal(first, props.itemSize);\n        horizontal ? setTransform(translateVal, 0) : setTransform(0, translateVal);\n      }\n    }\n  };\n\n  var onScrollPositionChange = function onScrollPositionChange(event) {\n    var target = event.target;\n    var contentPos = getContentPosition();\n\n    var calculateScrollPos = function calculateScrollPos(_pos, _cpos) {\n      return _pos ? _pos > _cpos ? _pos - _cpos : _pos : 0;\n    };\n\n    var calculateCurrentIndex = function calculateCurrentIndex(_pos, _size) {\n      return Math.floor(_pos / (_size || _pos));\n    };\n\n    var calculateTriggerIndex = function calculateTriggerIndex(_currentIndex, _first, _last, _num, _numT, _isScrollDownOrRight) {\n      return _currentIndex <= _numT ? _numT : _isScrollDownOrRight ? _last - _num - _numT : _first + _numT - 1;\n    };\n\n    var calculateFirst = function calculateFirst(_currentIndex, _triggerIndex, _first, _last, _num, _numT, _isScrollDownOrRight) {\n      if (_currentIndex <= _numT) return 0;else return Math.max(0, _isScrollDownOrRight ? _currentIndex < _triggerIndex ? _first : _currentIndex - _numT : _currentIndex > _triggerIndex ? _first : _currentIndex - 2 * _numT);\n    };\n\n    var calculateLast = function calculateLast(_currentIndex, _first, _last, _num, _numT, _isCols) {\n      var lastValue = _first + _num + 2 * _numT;\n\n      if (_currentIndex >= _numT) {\n        lastValue += _numT + 1;\n      }\n\n      return getLast(lastValue, _isCols);\n    };\n\n    var scrollTop = calculateScrollPos(target.scrollTop, contentPos.top);\n    var scrollLeft = calculateScrollPos(target.scrollLeft, contentPos.left);\n    var newFirst = both ? {\n      rows: 0,\n      cols: 0\n    } : 0;\n    var newLast = lastState;\n    var isRangeChanged = false;\n    var newScrollPos = lastScrollPos.current;\n\n    if (both) {\n      var isScrollDown = lastScrollPos.current.top <= scrollTop;\n      var isScrollRight = lastScrollPos.current.left <= scrollLeft;\n      var currentIndex = {\n        rows: calculateCurrentIndex(scrollTop, props.itemSize[0]),\n        cols: calculateCurrentIndex(scrollLeft, props.itemSize[1])\n      };\n      var triggerIndex = {\n        rows: calculateTriggerIndex(currentIndex.rows, firstState.rows, lastState.rows, numItemsInViewportState.rows, numToleratedItemsState[0], isScrollDown),\n        cols: calculateTriggerIndex(currentIndex.cols, firstState.cols, lastState.cols, numItemsInViewportState.cols, numToleratedItemsState[1], isScrollRight)\n      };\n      newFirst = {\n        rows: calculateFirst(currentIndex.rows, triggerIndex.rows, firstState.rows, lastState.rows, numItemsInViewportState.rows, numToleratedItemsState[0], isScrollDown),\n        cols: calculateFirst(currentIndex.cols, triggerIndex.cols, firstState.cols, lastState.cols, numItemsInViewportState.cols, numToleratedItemsState[1], isScrollRight)\n      };\n      newLast = {\n        rows: calculateLast(currentIndex.rows, newFirst.rows, lastState.rows, numItemsInViewportState.rows, numToleratedItemsState[0]),\n        cols: calculateLast(currentIndex.cols, newFirst.cols, lastState.cols, numItemsInViewportState.cols, numToleratedItemsState[1], true)\n      };\n      isRangeChanged = newFirst.rows !== firstState.rows || newLast.rows !== lastState.rows || newFirst.cols !== firstState.cols || newLast.cols !== lastState.cols;\n      newScrollPos = {\n        top: scrollTop,\n        left: scrollLeft\n      };\n    } else {\n      var scrollPos = horizontal ? scrollLeft : scrollTop;\n      var isScrollDownOrRight = lastScrollPos.current <= scrollPos;\n\n      var _currentIndex2 = calculateCurrentIndex(scrollPos, props.itemSize);\n\n      var _triggerIndex2 = calculateTriggerIndex(_currentIndex2, firstState, lastState, numItemsInViewportState, numToleratedItemsState, isScrollDownOrRight);\n\n      newFirst = calculateFirst(_currentIndex2, _triggerIndex2, firstState, lastState, numItemsInViewportState, numToleratedItemsState, isScrollDownOrRight);\n      newLast = calculateLast(_currentIndex2, newFirst, lastState, numItemsInViewportState, numToleratedItemsState);\n      isRangeChanged = newFirst !== firstState || newLast !== lastState;\n      newScrollPos = scrollPos;\n    }\n\n    return {\n      first: newFirst,\n      last: newLast,\n      isRangeChanged: isRangeChanged,\n      scrollPos: newScrollPos\n    };\n  };\n\n  var onScrollChange = function onScrollChange(event) {\n    var _onScrollPositionChan = onScrollPositionChange(event),\n        first = _onScrollPositionChan.first,\n        last = _onScrollPositionChan.last,\n        isRangeChanged = _onScrollPositionChan.isRangeChanged,\n        scrollPos = _onScrollPositionChan.scrollPos;\n\n    if (isRangeChanged) {\n      var newState = {\n        first: first,\n        last: last\n      };\n      setContentPosition(newState);\n      setFirstState(first);\n      setLastState(last);\n      lastScrollPos.current = scrollPos;\n      props.onScrollIndexChange && props.onScrollIndexChange(newState);\n\n      if (props.lazy) {\n        props.onLazyLoad && props.onLazyLoad(newState);\n      }\n    }\n  };\n\n  var onScroll = function onScroll(event) {\n    props.onScroll && props.onScroll(event);\n\n    if (props.delay) {\n      if (scrollTimeout.current) {\n        clearTimeout(scrollTimeout.current);\n      }\n\n      if (!loadingState && props.showLoader) {\n        var _onScrollPositionChan2 = onScrollPositionChange(event),\n            changed = _onScrollPositionChan2.isRangeChanged;\n\n        changed && setLoadingState(true);\n      }\n\n      scrollTimeout.current = setTimeout(function () {\n        onScrollChange(event);\n\n        if (loadingState && props.showLoader && (!props.lazy || props.loading === undefined)) {\n          setLoadingState(false);\n        }\n      }, props.delay);\n    } else {\n      onScrollChange(event);\n    }\n  };\n\n  var onResize = function onResize() {\n    if (resizeTimeout.current) {\n      clearTimeout(resizeTimeout.current);\n    }\n\n    resizeTimeout.current = setTimeout(function () {\n      if (elementRef.current) {\n        var _ref = [DomHandler.getWidth(elementRef.current), DomHandler.getHeight(elementRef.current)],\n            width = _ref[0],\n            height = _ref[1];\n        var isDiffWidth = width !== defaultWidth.current,\n            isDiffHeight = height !== defaultHeight.current;\n        var reinit = both ? isDiffWidth || isDiffHeight : horizontal ? isDiffWidth : vertical ? isDiffHeight : false;\n\n        if (reinit) {\n          setNumToleratedItemsState(props.numToleratedItems);\n          defaultWidth.current = width;\n          defaultHeight.current = height;\n        }\n      }\n    }, props.resizeDelay);\n  };\n\n  var getOptions = function getOptions(renderedIndex) {\n    var count = (props.items || []).length;\n    var index = both ? firstState.rows + renderedIndex : firstState + renderedIndex;\n    return {\n      index: index,\n      count: count,\n      first: index === 0,\n      last: index === count - 1,\n      even: index % 2 === 0,\n      odd: index % 2 !== 0,\n      props: props\n    };\n  };\n\n  var loaderOptions = function loaderOptions(index, extOptions) {\n    var count = loaderArrState.length;\n    return _objectSpread({\n      index: index,\n      count: count,\n      first: index === 0,\n      last: index === count - 1,\n      even: index % 2 === 0,\n      odd: index % 2 !== 0,\n      props: props\n    }, extOptions);\n  };\n\n  var loadedItems = function loadedItems() {\n    var items = props.items;\n\n    if (items && !loadingState) {\n      if (both) return items.slice(firstState.rows, lastState.rows).map(function (item) {\n        return props.columns ? item : item.slice(firstState.cols, lastState.cols);\n      });else if (horizontal && props.columns) return items;else return items.slice(firstState, lastState);\n    }\n\n    return [];\n  };\n\n  var init = function init() {\n    if (!props.disabled) {\n      setSize();\n      calculateOptions();\n      setSpacerSize();\n    }\n  };\n\n  useMountEffect(function () {\n    if (!props.disabled) {\n      init();\n      bindWindowResizeListener();\n      bindOrientationChangeListener();\n      defaultWidth.current = DomHandler.getWidth(elementRef.current);\n      defaultHeight.current = DomHandler.getHeight(elementRef.current);\n    }\n  });\n  useUpdateEffect(function () {\n    init();\n  }, [props.itemSize, props.scrollHeight]);\n  useUpdateEffect(function () {\n    if (props.numToleratedItems !== numToleratedItemsState) {\n      setNumToleratedItemsState(props.numToleratedItems);\n    }\n  }, [props.numToleratedItems]);\n  useUpdateEffect(function () {\n    if (props.numToleratedItems === numToleratedItemsState) {\n      init(); // reinit after resizing\n    }\n  }, [numToleratedItemsState]);\n  useUpdateEffect(function () {\n    if (!prevItems || prevItems.length !== (props.items || []).length) {\n      init();\n    }\n\n    var loading = loadingState;\n\n    if (props.lazy && prevLoading !== props.loading && props.loading !== loadingState) {\n      setLoadingState(props.loading);\n      loading = props.loading;\n    }\n\n    calculateAutoSize(loading);\n  });\n  useUpdateEffect(function () {\n    lastScrollPos.current = both ? {\n      top: 0,\n      left: 0\n    } : 0;\n  }, [props.orientation]);\n  React.useImperativeHandle(ref, function () {\n    return {\n      props: props,\n      getElementRef: getElementRef,\n      scrollTo: scrollTo,\n      scrollToIndex: scrollToIndex,\n      scrollInView: scrollInView,\n      getRenderedRange: getRenderedRange\n    };\n  });\n\n  var createLoaderItem = function createLoaderItem(index) {\n    var extOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = loaderOptions(index, extOptions);\n    var content = ObjectUtils.getJSXElement(props.loadingTemplate, options);\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: index\n    }, content);\n  };\n\n  var createLoader = function createLoader() {\n    if (!props.loaderDisabled && props.showLoader && loadingState) {\n      var className = classNames('p-virtualscroller-loader', {\n        'p-component-overlay': !props.loadingTemplate\n      });\n      var content = /*#__PURE__*/React.createElement(\"i\", {\n        className: \"p-virtualscroller-loading-icon pi pi-spinner pi-spin\"\n      });\n\n      if (props.loadingTemplate) {\n        content = loaderArrState.map(function (_, index) {\n          return createLoaderItem(index, both && {\n            numCols: numItemsInViewportState.cols\n          });\n        });\n      } else if (props.loaderIconTemplate) {\n        var defaultContentOptions = {\n          className: 'p-virtualscroller-loading-icon',\n          element: content,\n          props: props\n        };\n        content = ObjectUtils.getJSXElement(props.loaderIconTemplate, defaultContentOptions);\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: className\n      }, content);\n    }\n\n    return null;\n  };\n\n  var createSpacer = function createSpacer() {\n    if (props.showSpacer) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: _spacerRef,\n        className: \"p-virtualscroller-spacer\"\n      });\n    }\n\n    return null;\n  };\n\n  var createItem = function createItem(item, index) {\n    var options = getOptions(index);\n    var content = ObjectUtils.getJSXElement(props.itemTemplate, item, options);\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: options.index\n    }, content);\n  };\n\n  var createItems = function createItems() {\n    var items = loadedItems();\n    return items.map(createItem);\n  };\n\n  var createContent = function createContent() {\n    var items = createItems();\n    var className = classNames('p-virtualscroller-content', {\n      'p-virtualscroller-loading': loadingState\n    });\n    var content = /*#__PURE__*/React.createElement(\"div\", {\n      ref: _contentRef,\n      className: className\n    }, items);\n\n    if (props.contentTemplate) {\n      var defaultOptions = {\n        className: className,\n        contentRef: function contentRef(el) {\n          return _contentRef.current = ObjectUtils.getRefElement(el);\n        },\n        spacerRef: function spacerRef(el) {\n          return _spacerRef.current = ObjectUtils.getRefElement(el);\n        },\n        stickyRef: function stickyRef(el) {\n          return _stickyRef.current = ObjectUtils.getRefElement(el);\n        },\n        items: loadedItems(),\n        getItemOptions: function getItemOptions(index) {\n          return getOptions(index);\n        },\n        children: items,\n        element: content,\n        props: props,\n        loading: loadingState,\n        getLoaderOptions: function getLoaderOptions(index, ext) {\n          return loaderOptions(index, ext);\n        },\n        loadingTemplate: props.loadingTemplate,\n        itemSize: props.itemSize,\n        rows: getRows(),\n        columns: getColumns(),\n        vertical: vertical,\n        horizontal: horizontal,\n        both: both\n      };\n      return ObjectUtils.getJSXElement(props.contentTemplate, defaultOptions);\n    }\n\n    return content;\n  };\n\n  if (props.disabled) {\n    var content = ObjectUtils.getJSXElement(props.contentTemplate, {\n      items: props.items,\n      rows: props.items,\n      columns: props.columns\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, props.children, content);\n  } else {\n    var otherProps = ObjectUtils.findDiffKeys(props, VirtualScroller.defaultProps);\n    var className = classNames('p-virtualscroller', {\n      'p-both-scroll': both,\n      'p-horizontal-scroll': horizontal\n    }, props.className);\n    var loader = createLoader();\n\n    var _content = createContent();\n\n    var spacer = createSpacer();\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      ref: elementRef,\n      className: className,\n      tabIndex: 0,\n      style: props.style\n    }, otherProps, {\n      onScroll: onScroll\n    }), _content, spacer, loader);\n  }\n}));\nVirtualScroller.displayName = 'VirtualScroller';\nVirtualScroller.defaultProps = {\n  __TYPE: 'VirtualScroller',\n  id: null,\n  style: null,\n  className: null,\n  items: null,\n  itemSize: 0,\n  scrollHeight: null,\n  scrollWidth: null,\n  orientation: 'vertical',\n  numToleratedItems: null,\n  delay: 0,\n  resizeDelay: 10,\n  lazy: false,\n  disabled: false,\n  loaderDisabled: false,\n  columns: null,\n  loading: undefined,\n  autoSize: false,\n  showSpacer: true,\n  showLoader: false,\n  loadingTemplate: null,\n  loaderIconTemplate: null,\n  itemTemplate: null,\n  contentTemplate: null,\n  onScroll: null,\n  onScrollIndexChange: null,\n  onLazyLoad: null\n};\nexport { VirtualScroller };","map":{"version":3,"sources":["/Users/macbookair/Desktop/DMF_SITE/light-of-islam-client/node_modules/primereact/virtualscroller/virtualscroller.esm.js"],"names":["React","usePrevious","useResizeListener","useEventListener","useMountEffect","useUpdateEffect","DomHandler","ObjectUtils","classNames","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_typeof","obj","Symbol","iterator","constructor","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","TypeError","String","Number","_toPropertyKey","arg","_defineProperty","value","defineProperty","enumerable","configurable","writable","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","_i","_s","_e","_x","_r","_arr","_n","_d","next","done","push","err","_arrayLikeToArray","len","arr2","_unsupportedIterableToArray","o","minLen","n","toString","slice","name","from","test","_nonIterableRest","_slicedToArray","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","forEach","getOwnPropertyDescriptors","defineProperties","VirtualScroller","memo","forwardRef","props","ref","vertical","orientation","horizontal","both","_React$useState","useState","rows","cols","_React$useState2","firstState","setFirstState","_React$useState3","_React$useState4","lastState","setLastState","_React$useState5","_React$useState6","numItemsInViewportState","setNumItemsInViewportState","_React$useState7","numToleratedItems","_React$useState8","numToleratedItemsState","setNumToleratedItemsState","_React$useState9","loading","_React$useState10","loadingState","setLoadingState","_React$useState11","_React$useState12","loaderArrState","setLoaderArrState","elementRef","useRef","_contentRef","_spacerRef","_stickyRef","lastScrollPos","top","left","scrollTimeout","resizeTimeout","defaultWidth","defaultHeight","prevItems","items","prevLoading","_useResizeListener","listener","event","onResize","_useResizeListener2","bindWindowResizeListener","_useEventListener","type","_useEventListener2","bindOrientationChangeListener","getElementRef","scrollTo","options","current","scrollToIndex","index","behavior","_calculateNumItems","calculateNumItems","calculateFirst","_index","_numT","calculateCoord","_first","_size","scrollToItem","newFirst","itemSize","_newFirst","scrollInView","to","_getRenderedRange","getRenderedRange","first","viewport","isToStart","isToEnd","pos","last","_pos2","getRows","loaderDisabled","loadedItems","getColumns","columns","calculateFirstInViewport","_pos","Math","floor","firstInViewport","lastInViewport","_elementRef$current","scrollTop","scrollLeft","scrollPos","contentPos","getContentPosition","contentWidth","offsetWidth","contentHeight","offsetHeight","calculateNumItemsInViewport","_contentSize","_itemSize","ceil","calculateNumToleratedItems","_numItems","numItemsInViewport","calculateOptions","_calculateNumItems2","calculateLast","_num","_isCols","getLast","showLoader","map","lazy","onLazyLoad","calculateAutoSize","autoSize","Promise","resolve","then","style","minHeight","minWidth","_contentRef$current","width","height","isCols","min","getComputedStyle","parseInt","paddingLeft","max","right","paddingRight","paddingTop","bottom","paddingBottom","x","y","setSize","parentElement","scrollWidth","concat","scrollHeight","setProp","_name","_value","setSpacerSize","_cpos","setContentPosition","calculateTranslateVal","setTransform","_y","transform","translateVal","onScrollPositionChange","calculateScrollPos","calculateCurrentIndex","calculateTriggerIndex","_currentIndex","_last","_isScrollDownOrRight","_triggerIndex","lastValue","newLast","isRangeChanged","newScrollPos","isScrollDown","isScrollRight","currentIndex","triggerIndex","isScrollDownOrRight","_currentIndex2","_triggerIndex2","onScrollChange","_onScrollPositionChan","newState","onScrollIndexChange","onScroll","delay","clearTimeout","_onScrollPositionChan2","changed","setTimeout","_ref","getWidth","getHeight","isDiffWidth","isDiffHeight","reinit","resizeDelay","getOptions","renderedIndex","count","even","odd","loaderOptions","extOptions","item","init","disabled","useImperativeHandle","createLoaderItem","content","getJSXElement","loadingTemplate","createElement","Fragment","createLoader","className","_","numCols","loaderIconTemplate","defaultContentOptions","element","createSpacer","showSpacer","createItem","itemTemplate","createItems","createContent","contentTemplate","defaultOptions","contentRef","el","getRefElement","spacerRef","stickyRef","getItemOptions","children","getLoaderOptions","ext","otherProps","findDiffKeys","defaultProps","loader","_content","spacer","tabIndex","displayName","__TYPE","id"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { usePrevious, useResizeListener, useEventListener, useMountEffect, useUpdateEffect } from 'primereact/hooks';\nimport { DomHandler, ObjectUtils, classNames } from 'primereact/utils';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0) {\n        ;\n      }\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar VirtualScroller = /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var vertical = props.orientation === 'vertical';\n  var horizontal = props.orientation === 'horizontal';\n  var both = props.orientation === 'both';\n  var _React$useState = React.useState(both ? {\n      rows: 0,\n      cols: 0\n    } : 0),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    firstState = _React$useState2[0],\n    setFirstState = _React$useState2[1];\n  var _React$useState3 = React.useState(both ? {\n      rows: 0,\n      cols: 0\n    } : 0),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    lastState = _React$useState4[0],\n    setLastState = _React$useState4[1];\n  var _React$useState5 = React.useState(both ? {\n      rows: 0,\n      cols: 0\n    } : 0),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    numItemsInViewportState = _React$useState6[0],\n    setNumItemsInViewportState = _React$useState6[1];\n  var _React$useState7 = React.useState(props.numToleratedItems),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    numToleratedItemsState = _React$useState8[0],\n    setNumToleratedItemsState = _React$useState8[1];\n  var _React$useState9 = React.useState(props.loading || false),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    loadingState = _React$useState10[0],\n    setLoadingState = _React$useState10[1];\n  var _React$useState11 = React.useState([]),\n    _React$useState12 = _slicedToArray(_React$useState11, 2),\n    loaderArrState = _React$useState12[0],\n    setLoaderArrState = _React$useState12[1];\n  var elementRef = React.useRef(null);\n  var _contentRef = React.useRef(null);\n  var _spacerRef = React.useRef(null);\n  var _stickyRef = React.useRef(null);\n  var lastScrollPos = React.useRef(both ? {\n    top: 0,\n    left: 0\n  } : 0);\n  var scrollTimeout = React.useRef(null);\n  var resizeTimeout = React.useRef(null);\n  var defaultWidth = React.useRef(null);\n  var defaultHeight = React.useRef(null);\n  var prevItems = usePrevious(props.items);\n  var prevLoading = usePrevious(props.loading);\n  var _useResizeListener = useResizeListener({\n      listener: function listener(event) {\n        return onResize();\n      }\n    }),\n    _useResizeListener2 = _slicedToArray(_useResizeListener, 1),\n    bindWindowResizeListener = _useResizeListener2[0];\n  var _useEventListener = useEventListener({\n      target: 'window',\n      type: 'orientationchange',\n      listener: function listener(event) {\n        return onResize();\n      }\n    }),\n    _useEventListener2 = _slicedToArray(_useEventListener, 1),\n    bindOrientationChangeListener = _useEventListener2[0];\n  var getElementRef = function getElementRef() {\n    return elementRef;\n  };\n  var scrollTo = function scrollTo(options) {\n    lastScrollPos.current = both ? {\n      top: 0,\n      left: 0\n    } : 0;\n    elementRef.current && elementRef.current.scrollTo(options);\n  };\n  var scrollToIndex = function scrollToIndex(index) {\n    var behavior = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'auto';\n    var _calculateNumItems = calculateNumItems(),\n      numToleratedItems = _calculateNumItems.numToleratedItems;\n    var calculateFirst = function calculateFirst() {\n      var _index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var _numT = arguments.length > 1 ? arguments[1] : undefined;\n      return _index <= _numT ? 0 : _index;\n    };\n    var calculateCoord = function calculateCoord(_first, _size) {\n      return _first * _size;\n    };\n    var scrollToItem = function scrollToItem() {\n      var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var top = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      return scrollTo({\n        left: left,\n        top: top,\n        behavior: behavior\n      });\n    };\n    if (both) {\n      var newFirst = {\n        rows: calculateFirst(index[0], numToleratedItems[0]),\n        cols: calculateFirst(index[1], numToleratedItems[1])\n      };\n      if (newFirst.rows !== firstState.rows || newFirst.cols !== firstState.cols) {\n        scrollToItem(calculateCoord(newFirst.cols, props.itemSize[1]), calculateCoord(newFirst.rows, props.itemSize[0]));\n      }\n    } else {\n      var _newFirst = calculateFirst(index, numToleratedItems);\n      if (_newFirst !== firstState) {\n        horizontal ? scrollToItem(calculateCoord(_newFirst, props.itemSize), 0) : scrollToItem(0, calculateCoord(_newFirst, props.itemSize));\n      }\n    }\n  };\n  var scrollInView = function scrollInView(index, to) {\n    var behavior = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'auto';\n    if (to) {\n      var _getRenderedRange = getRenderedRange(),\n        first = _getRenderedRange.first,\n        viewport = _getRenderedRange.viewport;\n      var scrollToItem = function scrollToItem() {\n        var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var top = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        return scrollTo({\n          left: left,\n          top: top,\n          behavior: behavior\n        });\n      };\n      var isToStart = to === 'to-start';\n      var isToEnd = to === 'to-end';\n      if (isToStart) {\n        if (both) {\n          if (viewport.first.rows - first.rows > index[0]) {\n            scrollToItem(viewport.first.cols * props.itemSize[1], (viewport.first.rows - 1) * props.itemSize[0]);\n          } else if (viewport.first.cols - first.cols > index[1]) {\n            scrollToItem((viewport.first.cols - 1) * props.itemSize[1], viewport.first.rows * props.itemSize[0]);\n          }\n        } else {\n          if (viewport.first - first > index) {\n            var pos = (viewport.first - 1) * props.itemSize;\n            horizontal ? scrollToItem(pos, 0) : scrollToItem(0, pos);\n          }\n        }\n      } else if (isToEnd) {\n        if (both) {\n          if (viewport.last.rows - first.rows <= index[0] + 1) {\n            scrollToItem(viewport.first.cols * props.itemSize[1], (viewport.first.rows + 1) * props.itemSize[0]);\n          } else if (viewport.last.cols - first.cols <= index[1] + 1) {\n            scrollToItem((viewport.first.cols + 1) * props.itemSize[1], viewport.first.rows * props.itemSize[0]);\n          }\n        } else {\n          if (viewport.last - first <= index + 1) {\n            var _pos2 = (viewport.first + 1) * props.itemSize;\n            horizontal ? scrollToItem(_pos2, 0) : scrollToItem(0, _pos2);\n          }\n        }\n      }\n    } else {\n      scrollToIndex(index, behavior);\n    }\n  };\n  var getRows = function getRows() {\n    return loadingState ? props.loaderDisabled ? loaderArrState : [] : loadedItems();\n  };\n  var getColumns = function getColumns() {\n    if (props.columns && both || horizontal) {\n      return loadingState && props.loaderDisabled ? both ? loaderArrState[0] : loaderArrState : props.columns.slice(both ? firstState.cols : firstState, both ? lastState.cols : lastState);\n    }\n    return props.columns;\n  };\n  var getRenderedRange = function getRenderedRange() {\n    var calculateFirstInViewport = function calculateFirstInViewport(_pos, _size) {\n      return Math.floor(_pos / (_size || _pos));\n    };\n    var firstInViewport = firstState;\n    var lastInViewport = 0;\n    if (elementRef.current) {\n      var _elementRef$current = elementRef.current,\n        scrollTop = _elementRef$current.scrollTop,\n        scrollLeft = _elementRef$current.scrollLeft;\n      if (both) {\n        firstInViewport = {\n          rows: calculateFirstInViewport(scrollTop, props.itemSize[0]),\n          cols: calculateFirstInViewport(scrollLeft, props.itemSize[1])\n        };\n        lastInViewport = {\n          rows: firstInViewport.rows + numItemsInViewportState.rows,\n          cols: firstInViewport.cols + numItemsInViewportState.cols\n        };\n      } else {\n        var scrollPos = horizontal ? scrollLeft : scrollTop;\n        firstInViewport = calculateFirstInViewport(scrollPos, props.itemSize);\n        lastInViewport = firstInViewport + numItemsInViewportState;\n      }\n    }\n    return {\n      first: firstState,\n      last: lastState,\n      viewport: {\n        first: firstInViewport,\n        last: lastInViewport\n      }\n    };\n  };\n  var calculateNumItems = function calculateNumItems() {\n    var contentPos = getContentPosition();\n    var contentWidth = elementRef.current ? elementRef.current.offsetWidth - contentPos.left : 0;\n    var contentHeight = elementRef.current ? elementRef.current.offsetHeight - contentPos.top : 0;\n    var calculateNumItemsInViewport = function calculateNumItemsInViewport(_contentSize, _itemSize) {\n      return Math.ceil(_contentSize / (_itemSize || _contentSize));\n    };\n    var calculateNumToleratedItems = function calculateNumToleratedItems(_numItems) {\n      return Math.ceil(_numItems / 2);\n    };\n    var numItemsInViewport = both ? {\n      rows: calculateNumItemsInViewport(contentHeight, props.itemSize[0]),\n      cols: calculateNumItemsInViewport(contentWidth, props.itemSize[1])\n    } : calculateNumItemsInViewport(horizontal ? contentWidth : contentHeight, props.itemSize);\n    var numToleratedItems = numToleratedItemsState || (both ? [calculateNumToleratedItems(numItemsInViewport.rows), calculateNumToleratedItems(numItemsInViewport.cols)] : calculateNumToleratedItems(numItemsInViewport));\n    return {\n      numItemsInViewport: numItemsInViewport,\n      numToleratedItems: numToleratedItems\n    };\n  };\n  var calculateOptions = function calculateOptions() {\n    var _calculateNumItems2 = calculateNumItems(),\n      numItemsInViewport = _calculateNumItems2.numItemsInViewport,\n      numToleratedItems = _calculateNumItems2.numToleratedItems;\n    var calculateLast = function calculateLast(_first, _num, _numT, _isCols) {\n      return getLast(_first + _num + (_first < _numT ? 2 : 3) * _numT, _isCols);\n    };\n    var last = both ? {\n      rows: calculateLast(firstState.rows, numItemsInViewport.rows, numToleratedItems[0]),\n      cols: calculateLast(firstState.cols, numItemsInViewport.cols, numToleratedItems[1], true)\n    } : calculateLast(firstState, numItemsInViewport, numToleratedItems);\n    setNumItemsInViewportState(numItemsInViewport);\n    setNumToleratedItemsState(numToleratedItems);\n    setLastState(last);\n    if (props.showLoader) {\n      setLoaderArrState(both ? Array.from({\n        length: numItemsInViewport.rows\n      }).map(function () {\n        return Array.from({\n          length: numItemsInViewport.cols\n        });\n      }) : Array.from({\n        length: numItemsInViewport\n      }));\n    }\n    if (props.lazy) {\n      props.onLazyLoad && props.onLazyLoad({\n        first: firstState,\n        last: last\n      });\n    }\n  };\n  var calculateAutoSize = function calculateAutoSize(loading) {\n    if (props.autoSize && !loading) {\n      Promise.resolve().then(function () {\n        if (_contentRef.current) {\n          _contentRef.current.style.minHeight = _contentRef.current.style.minWidth = 'auto';\n          var _contentRef$current = _contentRef.current,\n            offsetWidth = _contentRef$current.offsetWidth,\n            offsetHeight = _contentRef$current.offsetHeight;\n          (both || horizontal) && (elementRef.current.style.width = (offsetWidth < defaultWidth.current ? offsetWidth : defaultWidth.current) + 'px');\n          (both || vertical) && (elementRef.current.style.height = (offsetHeight < defaultHeight.current ? offsetHeight : defaultHeight.current) + 'px');\n          _contentRef.current.style.minHeight = _contentRef.current.style.minWidth = '';\n        }\n      });\n    }\n  };\n  var getLast = function getLast() {\n    var last = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var isCols = arguments.length > 1 ? arguments[1] : undefined;\n    return props.items ? Math.min(isCols ? (props.columns || props.items[0]).length : props.items.length, last) : 0;\n  };\n  var getContentPosition = function getContentPosition() {\n    if (_contentRef.current) {\n      var style = getComputedStyle(_contentRef.current);\n      var left = parseInt(style.paddingLeft, 10) + Math.max(parseInt(style.left, 10), 0);\n      var right = parseInt(style.paddingRight, 10) + Math.max(parseInt(style.right, 10), 0);\n      var top = parseInt(style.paddingTop, 10) + Math.max(parseInt(style.top, 10), 0);\n      var bottom = parseInt(style.paddingBottom, 10) + Math.max(parseInt(style.bottom, 10), 0);\n      return {\n        left: left,\n        right: right,\n        top: top,\n        bottom: bottom,\n        x: left + right,\n        y: top + bottom\n      };\n    }\n    return {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      x: 0,\n      y: 0\n    };\n  };\n  var setSize = function setSize() {\n    if (elementRef.current) {\n      var parentElement = elementRef.current.parentElement;\n      var width = props.scrollWidth || \"\".concat(elementRef.current.offsetWidth || parentElement.offsetWidth, \"px\");\n      var height = props.scrollHeight || \"\".concat(elementRef.current.offsetHeight || parentElement.offsetHeight, \"px\");\n      var setProp = function setProp(_name, _value) {\n        return elementRef.current.style[_name] = _value;\n      };\n      if (both || horizontal) {\n        setProp('height', height);\n        setProp('width', width);\n      } else {\n        setProp('height', height);\n      }\n    }\n  };\n  var setSpacerSize = function setSpacerSize() {\n    var items = props.items;\n    if (_spacerRef.current && items) {\n      var contentPos = getContentPosition();\n      var setProp = function setProp(_name, _value, _size) {\n        var _cpos = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n        return _spacerRef.current.style[_name] = (_value || []).length * _size + _cpos + 'px';\n      };\n      if (both) {\n        setProp('height', items, props.itemSize[0], contentPos.y);\n        setProp('width', props.columns || items[1], props.itemSize[1], contentPos.x);\n      } else {\n        horizontal ? setProp('width', props.columns || items, props.itemSize, contentPos.x) : setProp('height', items, props.itemSize, contentPos.y);\n      }\n    }\n  };\n  var setContentPosition = function setContentPosition(pos) {\n    if (_contentRef.current) {\n      var first = pos ? pos.first : firstState;\n      var calculateTranslateVal = function calculateTranslateVal(_first, _size) {\n        return _first * _size;\n      };\n      var setTransform = function setTransform() {\n        var _x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var _y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        _stickyRef.current && (_stickyRef.current.style.top = \"-\".concat(_y, \"px\"));\n        _contentRef.current.style.transform = \"translate3d(\".concat(_x, \"px, \").concat(_y, \"px, 0)\");\n      };\n      if (both) {\n        setTransform(calculateTranslateVal(first.cols, props.itemSize[1]), calculateTranslateVal(first.rows, props.itemSize[0]));\n      } else {\n        var translateVal = calculateTranslateVal(first, props.itemSize);\n        horizontal ? setTransform(translateVal, 0) : setTransform(0, translateVal);\n      }\n    }\n  };\n  var onScrollPositionChange = function onScrollPositionChange(event) {\n    var target = event.target;\n    var contentPos = getContentPosition();\n    var calculateScrollPos = function calculateScrollPos(_pos, _cpos) {\n      return _pos ? _pos > _cpos ? _pos - _cpos : _pos : 0;\n    };\n    var calculateCurrentIndex = function calculateCurrentIndex(_pos, _size) {\n      return Math.floor(_pos / (_size || _pos));\n    };\n    var calculateTriggerIndex = function calculateTriggerIndex(_currentIndex, _first, _last, _num, _numT, _isScrollDownOrRight) {\n      return _currentIndex <= _numT ? _numT : _isScrollDownOrRight ? _last - _num - _numT : _first + _numT - 1;\n    };\n    var calculateFirst = function calculateFirst(_currentIndex, _triggerIndex, _first, _last, _num, _numT, _isScrollDownOrRight) {\n      if (_currentIndex <= _numT) return 0;else return Math.max(0, _isScrollDownOrRight ? _currentIndex < _triggerIndex ? _first : _currentIndex - _numT : _currentIndex > _triggerIndex ? _first : _currentIndex - 2 * _numT);\n    };\n    var calculateLast = function calculateLast(_currentIndex, _first, _last, _num, _numT, _isCols) {\n      var lastValue = _first + _num + 2 * _numT;\n      if (_currentIndex >= _numT) {\n        lastValue += _numT + 1;\n      }\n      return getLast(lastValue, _isCols);\n    };\n    var scrollTop = calculateScrollPos(target.scrollTop, contentPos.top);\n    var scrollLeft = calculateScrollPos(target.scrollLeft, contentPos.left);\n    var newFirst = both ? {\n      rows: 0,\n      cols: 0\n    } : 0;\n    var newLast = lastState;\n    var isRangeChanged = false;\n    var newScrollPos = lastScrollPos.current;\n    if (both) {\n      var isScrollDown = lastScrollPos.current.top <= scrollTop;\n      var isScrollRight = lastScrollPos.current.left <= scrollLeft;\n      var currentIndex = {\n        rows: calculateCurrentIndex(scrollTop, props.itemSize[0]),\n        cols: calculateCurrentIndex(scrollLeft, props.itemSize[1])\n      };\n      var triggerIndex = {\n        rows: calculateTriggerIndex(currentIndex.rows, firstState.rows, lastState.rows, numItemsInViewportState.rows, numToleratedItemsState[0], isScrollDown),\n        cols: calculateTriggerIndex(currentIndex.cols, firstState.cols, lastState.cols, numItemsInViewportState.cols, numToleratedItemsState[1], isScrollRight)\n      };\n      newFirst = {\n        rows: calculateFirst(currentIndex.rows, triggerIndex.rows, firstState.rows, lastState.rows, numItemsInViewportState.rows, numToleratedItemsState[0], isScrollDown),\n        cols: calculateFirst(currentIndex.cols, triggerIndex.cols, firstState.cols, lastState.cols, numItemsInViewportState.cols, numToleratedItemsState[1], isScrollRight)\n      };\n      newLast = {\n        rows: calculateLast(currentIndex.rows, newFirst.rows, lastState.rows, numItemsInViewportState.rows, numToleratedItemsState[0]),\n        cols: calculateLast(currentIndex.cols, newFirst.cols, lastState.cols, numItemsInViewportState.cols, numToleratedItemsState[1], true)\n      };\n      isRangeChanged = newFirst.rows !== firstState.rows || newLast.rows !== lastState.rows || newFirst.cols !== firstState.cols || newLast.cols !== lastState.cols;\n      newScrollPos = {\n        top: scrollTop,\n        left: scrollLeft\n      };\n    } else {\n      var scrollPos = horizontal ? scrollLeft : scrollTop;\n      var isScrollDownOrRight = lastScrollPos.current <= scrollPos;\n      var _currentIndex2 = calculateCurrentIndex(scrollPos, props.itemSize);\n      var _triggerIndex2 = calculateTriggerIndex(_currentIndex2, firstState, lastState, numItemsInViewportState, numToleratedItemsState, isScrollDownOrRight);\n      newFirst = calculateFirst(_currentIndex2, _triggerIndex2, firstState, lastState, numItemsInViewportState, numToleratedItemsState, isScrollDownOrRight);\n      newLast = calculateLast(_currentIndex2, newFirst, lastState, numItemsInViewportState, numToleratedItemsState);\n      isRangeChanged = newFirst !== firstState || newLast !== lastState;\n      newScrollPos = scrollPos;\n    }\n    return {\n      first: newFirst,\n      last: newLast,\n      isRangeChanged: isRangeChanged,\n      scrollPos: newScrollPos\n    };\n  };\n  var onScrollChange = function onScrollChange(event) {\n    var _onScrollPositionChan = onScrollPositionChange(event),\n      first = _onScrollPositionChan.first,\n      last = _onScrollPositionChan.last,\n      isRangeChanged = _onScrollPositionChan.isRangeChanged,\n      scrollPos = _onScrollPositionChan.scrollPos;\n    if (isRangeChanged) {\n      var newState = {\n        first: first,\n        last: last\n      };\n      setContentPosition(newState);\n      setFirstState(first);\n      setLastState(last);\n      lastScrollPos.current = scrollPos;\n      props.onScrollIndexChange && props.onScrollIndexChange(newState);\n      if (props.lazy) {\n        props.onLazyLoad && props.onLazyLoad(newState);\n      }\n    }\n  };\n  var onScroll = function onScroll(event) {\n    props.onScroll && props.onScroll(event);\n    if (props.delay) {\n      if (scrollTimeout.current) {\n        clearTimeout(scrollTimeout.current);\n      }\n      if (!loadingState && props.showLoader) {\n        var _onScrollPositionChan2 = onScrollPositionChange(event),\n          changed = _onScrollPositionChan2.isRangeChanged;\n        changed && setLoadingState(true);\n      }\n      scrollTimeout.current = setTimeout(function () {\n        onScrollChange(event);\n        if (loadingState && props.showLoader && (!props.lazy || props.loading === undefined)) {\n          setLoadingState(false);\n        }\n      }, props.delay);\n    } else {\n      onScrollChange(event);\n    }\n  };\n  var onResize = function onResize() {\n    if (resizeTimeout.current) {\n      clearTimeout(resizeTimeout.current);\n    }\n    resizeTimeout.current = setTimeout(function () {\n      if (elementRef.current) {\n        var _ref = [DomHandler.getWidth(elementRef.current), DomHandler.getHeight(elementRef.current)],\n          width = _ref[0],\n          height = _ref[1];\n        var isDiffWidth = width !== defaultWidth.current,\n          isDiffHeight = height !== defaultHeight.current;\n        var reinit = both ? isDiffWidth || isDiffHeight : horizontal ? isDiffWidth : vertical ? isDiffHeight : false;\n        if (reinit) {\n          setNumToleratedItemsState(props.numToleratedItems);\n          defaultWidth.current = width;\n          defaultHeight.current = height;\n        }\n      }\n    }, props.resizeDelay);\n  };\n  var getOptions = function getOptions(renderedIndex) {\n    var count = (props.items || []).length;\n    var index = both ? firstState.rows + renderedIndex : firstState + renderedIndex;\n    return {\n      index: index,\n      count: count,\n      first: index === 0,\n      last: index === count - 1,\n      even: index % 2 === 0,\n      odd: index % 2 !== 0,\n      props: props\n    };\n  };\n  var loaderOptions = function loaderOptions(index, extOptions) {\n    var count = loaderArrState.length;\n    return _objectSpread({\n      index: index,\n      count: count,\n      first: index === 0,\n      last: index === count - 1,\n      even: index % 2 === 0,\n      odd: index % 2 !== 0,\n      props: props\n    }, extOptions);\n  };\n  var loadedItems = function loadedItems() {\n    var items = props.items;\n    if (items && !loadingState) {\n      if (both) return items.slice(firstState.rows, lastState.rows).map(function (item) {\n        return props.columns ? item : item.slice(firstState.cols, lastState.cols);\n      });else if (horizontal && props.columns) return items;else return items.slice(firstState, lastState);\n    }\n    return [];\n  };\n  var init = function init() {\n    if (!props.disabled) {\n      setSize();\n      calculateOptions();\n      setSpacerSize();\n    }\n  };\n  useMountEffect(function () {\n    if (!props.disabled) {\n      init();\n      bindWindowResizeListener();\n      bindOrientationChangeListener();\n      defaultWidth.current = DomHandler.getWidth(elementRef.current);\n      defaultHeight.current = DomHandler.getHeight(elementRef.current);\n    }\n  });\n  useUpdateEffect(function () {\n    init();\n  }, [props.itemSize, props.scrollHeight]);\n  useUpdateEffect(function () {\n    if (props.numToleratedItems !== numToleratedItemsState) {\n      setNumToleratedItemsState(props.numToleratedItems);\n    }\n  }, [props.numToleratedItems]);\n  useUpdateEffect(function () {\n    if (props.numToleratedItems === numToleratedItemsState) {\n      init(); // reinit after resizing\n    }\n  }, [numToleratedItemsState]);\n  useUpdateEffect(function () {\n    if (!prevItems || prevItems.length !== (props.items || []).length) {\n      init();\n    }\n    var loading = loadingState;\n    if (props.lazy && prevLoading !== props.loading && props.loading !== loadingState) {\n      setLoadingState(props.loading);\n      loading = props.loading;\n    }\n    calculateAutoSize(loading);\n  });\n  useUpdateEffect(function () {\n    lastScrollPos.current = both ? {\n      top: 0,\n      left: 0\n    } : 0;\n  }, [props.orientation]);\n  React.useImperativeHandle(ref, function () {\n    return {\n      props: props,\n      getElementRef: getElementRef,\n      scrollTo: scrollTo,\n      scrollToIndex: scrollToIndex,\n      scrollInView: scrollInView,\n      getRenderedRange: getRenderedRange\n    };\n  });\n  var createLoaderItem = function createLoaderItem(index) {\n    var extOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = loaderOptions(index, extOptions);\n    var content = ObjectUtils.getJSXElement(props.loadingTemplate, options);\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: index\n    }, content);\n  };\n  var createLoader = function createLoader() {\n    if (!props.loaderDisabled && props.showLoader && loadingState) {\n      var className = classNames('p-virtualscroller-loader', {\n        'p-component-overlay': !props.loadingTemplate\n      });\n      var content = /*#__PURE__*/React.createElement(\"i\", {\n        className: \"p-virtualscroller-loading-icon pi pi-spinner pi-spin\"\n      });\n      if (props.loadingTemplate) {\n        content = loaderArrState.map(function (_, index) {\n          return createLoaderItem(index, both && {\n            numCols: numItemsInViewportState.cols\n          });\n        });\n      } else if (props.loaderIconTemplate) {\n        var defaultContentOptions = {\n          className: 'p-virtualscroller-loading-icon',\n          element: content,\n          props: props\n        };\n        content = ObjectUtils.getJSXElement(props.loaderIconTemplate, defaultContentOptions);\n      }\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: className\n      }, content);\n    }\n    return null;\n  };\n  var createSpacer = function createSpacer() {\n    if (props.showSpacer) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: _spacerRef,\n        className: \"p-virtualscroller-spacer\"\n      });\n    }\n    return null;\n  };\n  var createItem = function createItem(item, index) {\n    var options = getOptions(index);\n    var content = ObjectUtils.getJSXElement(props.itemTemplate, item, options);\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: options.index\n    }, content);\n  };\n  var createItems = function createItems() {\n    var items = loadedItems();\n    return items.map(createItem);\n  };\n  var createContent = function createContent() {\n    var items = createItems();\n    var className = classNames('p-virtualscroller-content', {\n      'p-virtualscroller-loading': loadingState\n    });\n    var content = /*#__PURE__*/React.createElement(\"div\", {\n      ref: _contentRef,\n      className: className\n    }, items);\n    if (props.contentTemplate) {\n      var defaultOptions = {\n        className: className,\n        contentRef: function contentRef(el) {\n          return _contentRef.current = ObjectUtils.getRefElement(el);\n        },\n        spacerRef: function spacerRef(el) {\n          return _spacerRef.current = ObjectUtils.getRefElement(el);\n        },\n        stickyRef: function stickyRef(el) {\n          return _stickyRef.current = ObjectUtils.getRefElement(el);\n        },\n        items: loadedItems(),\n        getItemOptions: function getItemOptions(index) {\n          return getOptions(index);\n        },\n        children: items,\n        element: content,\n        props: props,\n        loading: loadingState,\n        getLoaderOptions: function getLoaderOptions(index, ext) {\n          return loaderOptions(index, ext);\n        },\n        loadingTemplate: props.loadingTemplate,\n        itemSize: props.itemSize,\n        rows: getRows(),\n        columns: getColumns(),\n        vertical: vertical,\n        horizontal: horizontal,\n        both: both\n      };\n      return ObjectUtils.getJSXElement(props.contentTemplate, defaultOptions);\n    }\n    return content;\n  };\n  if (props.disabled) {\n    var content = ObjectUtils.getJSXElement(props.contentTemplate, {\n      items: props.items,\n      rows: props.items,\n      columns: props.columns\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, props.children, content);\n  } else {\n    var otherProps = ObjectUtils.findDiffKeys(props, VirtualScroller.defaultProps);\n    var className = classNames('p-virtualscroller', {\n      'p-both-scroll': both,\n      'p-horizontal-scroll': horizontal\n    }, props.className);\n    var loader = createLoader();\n    var _content = createContent();\n    var spacer = createSpacer();\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      ref: elementRef,\n      className: className,\n      tabIndex: 0,\n      style: props.style\n    }, otherProps, {\n      onScroll: onScroll\n    }), _content, spacer, loader);\n  }\n}));\nVirtualScroller.displayName = 'VirtualScroller';\nVirtualScroller.defaultProps = {\n  __TYPE: 'VirtualScroller',\n  id: null,\n  style: null,\n  className: null,\n  items: null,\n  itemSize: 0,\n  scrollHeight: null,\n  scrollWidth: null,\n  orientation: 'vertical',\n  numToleratedItems: null,\n  delay: 0,\n  resizeDelay: 10,\n  lazy: false,\n  disabled: false,\n  loaderDisabled: false,\n  columns: null,\n  loading: undefined,\n  autoSize: false,\n  showSpacer: true,\n  showLoader: false,\n  loadingTemplate: null,\n  loaderIconTemplate: null,\n  itemTemplate: null,\n  contentTemplate: null,\n  onScroll: null,\n  onScrollIndexChange: null,\n  onLazyLoad: null\n};\n\nexport { VirtualScroller };\n"]},"metadata":{},"sourceType":"module"}